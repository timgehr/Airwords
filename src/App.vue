<template>
  <div id="app" style="margin: 0; width: 100vw">
    <div id="topbar">
      <svg
        id="toplogo"
        version="1.1"
        viewBox="0.0 0.0 848.6771653543307 175.23622047244095"
        fill="none"
        stroke="none"
        stroke-linecap="square"
        stroke-miterlimit="10"
        xmlns:xlink="http://www.w3.org/1999/xlink"
        xmlns="http://www.w3.org/2000/svg"
      >
        <clipPath id="p.0">
          <path d="m0 0l848.6772 0l0 175.23622l-848.6772 0l0 -175.23622z" clip-rule="nonzero" />
        </clipPath>
        <g clip-path="url(#p.0)">
          <path
            fill="#000000"
            fill-opacity="0"
            d="m0 0l848.6772 0l0 175.23622l-848.6772 0z"
            fill-rule="evenodd"
          />
          <path
            fill="#000000"
            fill-opacity="0"
            d="m-0.007874016 -21.405512l848.69293 0l0 218.04726l-848.69293 0z"
            fill-rule="evenodd"
          />
          <path
            fill="#ffffff"
            d="m44.65146 130.8181l-22.671875 0q-1.078125 0 -1.859375 -0.78125q-0.78125 -0.78125 -0.78125 -1.5q0 -0.7187424 0.125 -1.0781174l26.15625 -76.6875q1.078125 -3.953125 5.40625 -3.953125l33.359375 0q4.3125 0 5.390625 3.953125l26.15625 76.6875q0.125 0.359375 0.125 1.0781174q0 0.71875 -0.78125 1.5q-0.78125 0.78125 -1.859375 0.78125l-22.671875 0q-3.84375 0 -5.40625 -4.0781174l-3.0 -8.40625l-29.28125 0l-3.0 8.40625q-1.5625 4.0781174 -5.40625 4.0781174zm31.5625 -35.874992l-8.515625 -24.96875l-8.515625 24.96875l17.03125 0zm131.17178 -23.53125l-21.734375 0l0 34.8125l21.734375 0q1.3125 0 2.265625 0.953125q0.96875 0.953125 0.96875 2.28125l0 18.125q0 1.3124924 -0.96875 2.2812424q-0.953125 0.953125 -2.265625 0.953125l-76.09375 0q-1.3125 0 -2.28125 -0.953125q-0.953125 -0.96875 -0.953125 -2.2812424l0 -18.125q0 -1.328125 0.953125 -2.28125q0.96875 -0.953125 2.28125 -0.953125l21.96875 0l0 -34.8125l-21.96875 0q-1.3125 0 -2.28125 -0.953125q-0.953125 -0.953125 -0.953125 -2.28125l0 -18.125q0 -1.3125 0.953125 -2.265625q0.96875 -0.96875 2.28125 -0.96875l76.09375 0q1.3125 0 2.265625 0.96875q0.96875 0.953125 0.96875 2.265625l0 18.125q0 1.328125 -0.96875 2.28125q-0.953125 0.953125 -2.265625 0.953125zm111.59366 55.6875q0.234375 0.484375 0.234375 1.3281174q0 0.828125 -0.78125 1.609375q-0.78125 0.78125 -1.859375 0.78125l-27.234375 0q-3.59375 0 -5.046875 -2.9999924l-10.546875 -23.765625l-10.09375 0l0 23.53125q0 1.3124924 -0.953125 2.2812424q-0.953125 0.953125 -2.28125 0.953125l-25.921875 0q-1.3125 0 -2.28125 -0.953125q-0.953125 -0.96875 -0.953125 -2.2812424l0 -77.53125q0 -1.3125 0.953125 -2.265625q0.96875 -0.96875 2.28125 -0.96875l46.6875 0q16.4375 0 26.03125 7.796875q9.609375 7.796875 9.609375 21.25q0 16.3125 -12.609375 23.640625l14.765625 27.59375zm-55.328125 -57.96875l0 12.734375l15.0 0q2.640625 0 4.078125 -1.734375q1.453125 -1.75 1.453125 -4.390625q0 -2.640625 -1.390625 -4.625q-1.375 -1.984375 -4.140625 -1.984375l-15.0 0zm93.84366 61.687492l-16.796875 0q-2.28125 0 -3.78125 -1.375q-1.5 -1.390625 -1.734375 -3.1874924l-10.4375 -76.4375l0 -0.359375q0 -1.078125 0.765625 -1.859375q0.78125 -0.78125 1.875 -0.78125l20.640625 0q2.390625 0 3.890625 1.4375q1.5 1.4375 1.734375 3.609375l3.84375 36.71875l6.96875 -19.078125q0.359375 -1.203125 1.734375 -2.34375q1.375 -1.140625 3.546875 -1.140625l8.15625 0q2.15625 0 3.53125 1.140625q1.390625 1.140625 1.75 2.34375l6.953125 19.078125l3.84375 -36.71875q0.234375 -2.171875 1.734375 -3.609375q1.5 -1.4375 3.90625 -1.4375l20.640625 0q1.078125 0 1.859375 0.78125q0.78125 0.78125 0.78125 1.859375l0 0.359375l-10.4375 76.4375q-0.25 1.7968674 -1.75 3.1874924q-1.5 1.375 -3.78125 1.375l-16.796875 0q-2.15625 0 -3.546875 -1.078125q-1.375 -1.078125 -1.734375 -2.1562424l-11.03125 -25.328125l-11.046875 25.328125q-0.359375 1.0781174 -1.75 2.1562424q-1.375 1.078125 -3.53125 1.078125zm162.48425 -49.312492l0 14.625q0 12.375 -6.0 20.65625q-5.9999695 8.265625 -15.7187195 11.749992q-9.71875 3.484375 -22.921875 3.484375q-13.203125 0 -22.921875 -3.484375q-9.71875 -3.4843674 -15.71875 -11.749992q-6.0 -8.28125 -6.0 -20.890625l0 -14.15625q0 -18.125 12.421875 -27.125q12.421875 -9.0 32.21875 -9.0q19.796875 0 32.21875 9.0q12.4218445 9.0 12.4218445 26.890625zm-56.87497 -2.28125l0 19.1875q0 4.921875 3.296875 7.5625q3.296875 2.640625 8.9375 2.640625q5.640625 0 8.9375 -2.6875q3.296875 -2.703125 3.296875 -7.625l0 -18.96875q0 -4.921875 -3.296875 -7.609375q-3.296875 -2.703125 -8.9375 -2.703125q-5.640625 0 -8.9375 2.640625q-3.296875 2.640625 -3.296875 7.5625zm161.87491 47.875q0.234375 0.484375 0.234375 1.3281174q0 0.828125 -0.78125 1.609375q-0.78125 0.78125 -1.859375 0.78125l-27.234375 0q-3.59375 0 -5.046875 -2.9999924l-10.546875 -23.765625l-10.09375 0l0 23.53125q0 1.3124924 -0.953125 2.2812424q-0.953125 0.953125 -2.28125 0.953125l-25.921875 0q-1.3125 0 -2.28125 -0.953125q-0.953125 -0.96875 -0.953125 -2.2812424l0 -77.53125q0 -1.3125 0.953125 -2.265625q0.96875 -0.96875 2.28125 -0.96875l46.6875 0q16.4375 0 26.03125 7.796875q9.609375 7.796875 9.609375 21.25q0 16.3125 -12.609375 23.640625l14.765625 27.59375zm-55.328125 -57.96875l0 12.734375l15.0 0q2.640625 0 4.078125 -1.734375q1.453125 -1.75 1.453125 -4.390625q0 -2.640625 -1.390625 -4.625q-1.375 -1.984375 -4.140625 -1.984375l-15.0 0zm71.046814 -22.3125l38.28125 0q13.203125 0 22.921875 3.484375q9.71875 3.46875 15.71875 11.75q6.0 8.28125 6.0 20.640625l0 12.25q0 19.1875 -12.96875 27.953125q-11.875 7.9218674 -31.671875 7.9218674l-38.28125 0q-1.3125 0 -2.28125 -0.953125q-0.953125 -0.96875 -0.953125 -2.2812424l0 -77.53125q0 -1.3125 0.953125 -2.265625q0.96875 -0.96875 2.28125 -0.96875zm27.953125 23.40625l0 37.1875l10.921875 0q5.640625 0 8.9375 -2.6875q3.3125 -2.703125 3.3125 -7.625l0 -16.5625q0 -4.921875 -3.3125 -7.609375q-3.296875 -2.703125 -8.9375 -2.703125l-10.921875 0zm119.28113 7.078125q19.6875 2.28125 28.015625 8.46875q8.34375 6.171875 8.34375 18.53125q0 12.359375 -12.125 20.046875q-12.109375 7.6718674 -32.15625 7.6718674q-20.03125 0 -31.140625 -7.3749924q-11.09375 -7.390625 -11.09375 -18.1875q0 -2.640625 2.765625 -2.640625l24.59375 0q2.515625 0 4.078125 1.5625q3.359375 3.234375 11.640625 3.234375q11.40625 0 11.40625 -3.484375q0 -2.15625 -3.609375 -3.40625q-3.59375 -1.265625 -14.265625 -2.46875q-33.96875 -4.078125 -33.96875 -26.03125q0 -12.359375 10.921875 -19.984375q10.921875 -7.625 29.21875 -7.625q18.296875 0 29.578125 7.984375q11.28125 7.984375 11.28125 16.859375q0 1.203125 -0.78125 1.921875q-0.78125 0.71875 -2.09375 0.71875l-25.796875 0q-2.171875 0 -3.71875 -1.4375q-2.890625 -2.640625 -8.640625 -2.640625q-8.046875 0 -8.046875 3.359375q0 1.796875 3.109375 2.828125q3.125 1.015625 12.484375 2.09375z"
            fill-rule="nonzero"
          />
        </g>
      </svg>
    </div>
    <input
      id="site1"
      type="text"
      placeholder="site"
      class="textField1"
      v-on:keyup.enter="produceEncryption"
      v-model="input.site"
      autocapitalize="none"
    />
    <input
      id="code1"
      type="password"
      placeholder="password"
      class="textField1"
      v-on:keyup.enter="produceEncryption"
      v-model="input.key"
      autocapitalize="none"
    />
    <h1 class="err">{{this.errmess}}</h1>
    <h1 class="pass">{{this.res}}</h1>
    <button class="copyText" v-on:click="copyPassword">{{this.cliptext}}</button>
  </div>
</template>

<script>
const CryptoJS = require('crypto-js')
export default {
  data () {
    return {
      input: {
        key: '',
        site: ''
      },
      res: '',
      errmess: '',
      cliptext: 'Copy Password'
    }
  },
  methods: {
    produceEncryption () {
      this.res = ''
      var k = this.input.key
      var s = this.input.site
      if (k !== '' && s !== '') {
        var full = CryptoJS.HmacSHA256(s, k)
        this.res = this.hex_to_ascii(full)
        this.errmess = ''
      } else {
        this.errmess = 'Please enter site or password'
      }
    },
    hex_to_ascii (str1) {
      var hex = str1.toString()
      var str = ''
      for (var n = 0; n < hex.length; n += 2) {
        var strTemp = String.fromCharCode(
          (parseInt(hex.substr(n, 2), 16) % 89) + 33
        )
        if (
          strTemp === '/' ||
          strTemp === '\\' ||
          strTemp === '`' ||
          strTemp === ',' ||
          strTemp === '.' ||
          strTemp === ':' ||
          strTemp === '[' ||
          strTemp === ']' ||
          strTemp === ';' ||
          strTemp === '{' ||
          strTemp === '}'
        ) {
          strTemp = ''
        }
        str += strTemp
      }
      return str
    },
    copyPassword () {
      if (!navigator.clipboard) {
        return 'failed'
      }
      var text = this.res
      this.produceEncryption()
      try {
        navigator.clipboard.writeText(text)
        if (this.res !== '') {
          this.cliptext = 'Succesfully Copied'
        } else {
          this.cliptext = 'Copy Password'
        }
      } catch (err) {
        this.cliptext = 'Succesfully Copied'
      }
    }
  }
}
</script>

<style lang="scss" scoped>
#app {
  font-family: Trebuchet, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-align: center;
  color: #000000;
  margin-top: 60px;
  min-height: 100vh;
  font-size: 20px;
  display: flex;
  flex-direction: column;
  align-items: center;
  min-height: 270px;
  min-width: 220px;
  height: 260px;
  width: 220px;
}

.textField1 {
  font-family: Trebuchet, sans-serif;
  border: 0px solid #0000009a;
  background: #f0f1f3;
  //box-shadow: 0px 0px 5px #d3d6d823;
  border-radius: 20px;
  width: 200px;
  max-width: 70vw;
  height: 20px;
  padding: 10px 20px 10px 20px;
  font-size: 20px;
  text-align: center;
  margin: 10px 0px 10px 0px;
}

::placeholder {
  color: #c1c3c7;
}

.pass {
  margin-top: 0px;
  font-size: 10px;
  margin-bottom: 10px;
  padding: 0px 5px 0px 5px;
}

.err {
  color: rgb(207, 0, 0);
  margin-top: 0px;
  font-size: 10px;
  margin-bottom: 10px;
  padding: 0px 5px 0px 5px;
}

.textField1:enabled {
  outline: 0pt solid #2c3e501a;
}

#topbar {
  background: #0073df;
  height: 40px;
  min-width: 100vw;
  margin-bottom: 10px;
}

#toplogo {
  height: 30px;
  padding: 5px 0px 5px 0px;
}

.copyText {
  background: #3d95e7;
  color: white;
  border: 0px;
  font-size: 14px;
  position: absolute;
  width: 100vw;
  bottom: 0px;
  outline: none;
  padding: 15px 0px 15px 0px;
}

.copyText:hover {
  background: rgb(53, 157, 253);
}
</style>
